<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timer 24H Card - Preview</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f0f0f0;
            padding: 20px;
            margin: 0;
        }
        .preview-container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        /* Mock Home Assistant variables */
        :root {
            --card-background-color: white;
            --primary-text-color: #212121;
            --secondary-text-color: #727272;
            --divider-color: #e0e0e0;
            --ha-card-border-radius: 12px;
            --ha-card-box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="preview-container">
        <!-- הכרטיס יטען כאן -->
        <timer-24h-card id="preview-card"></timer-24h-card>
    </div>

    <!-- טעינת הקוד שלך -->
    <script src="timer-24h-card.js"></script>
    <script src="timer-24h-card-editor.js"></script>
    
    <script>
        // Mock HASS object for preview
        const mockHass = {
            states: {
                'binary_sensor.jewish_calendar_issur_melacha_in_effect': {
                    state: 'off',
                    attributes: {}
                },
                'light.tasmota': {
                    state: 'off',
                    attributes: {}
                }
            },
            callService: (domain, service, data) => {
                console.log(`Mock service call: ${domain}.${service}`, data);
                // Simulate state change
                if (data.entity_id && mockHass.states[data.entity_id]) {
                    mockHass.states[data.entity_id].state = service === 'turn_on' ? 'on' : 'off';
                }
            }
        };

        // Initialize the card
        const card = document.getElementById('preview-card');
        
        // Set config
        card.setConfig({
            title: 'Lighting Timer',
            home_sensors: ['binary_sensor.jewish_calendar_issur_melacha_in_effect'],
            home_logic: 'OR',
            entities: ['light.tasmota'],
            save_state: false // Don't save in preview
        });
        
        // Set mock hass
        card.hass = mockHass;
        
        console.log('Timer Card Preview loaded successfully!');
    </script>
</body>
</html>
